{% extends "base.html" %}

{% block content %}
<h2>Finalizar compra</h2>

{% if not cart %}
  <p>Seu carrinho est√° vazio.</p>
{% else %}
  <h3>Itens do carrinho</h3>
  <table border="1" cellpadding="4">
    <tr>
      <th>Jogo</th>
      <th>Quantidade</th>
    </tr>
    {% for jogo_id, quantidade in cart.items() %}
      {% set jogo = jogos[jogo_id] %}
      <tr>
        <td>{{ jogo.titulo }}</td>
        <td>{{ quantidade }}</td>
      </tr>
    {% endfor %}
  </table>

  <h3>Selecionar cliente</h3>
  <form method="post">
    <label>Cliente:</label><br>
    <select name="cliente_id" required>
      <option value="">-- selecione --</option>
      {% for cliente in clientes %}
        <option value="{{ cliente.id }}">{{ cliente.nome }} (ID {{ cliente.id }})</option>
      {% endfor %}
    </select>
    <br><br>
    <button type="submit">Confirmar compra</button>
  </form>

  <p><a href="{{ url_for('ver_carrinho') }}">Voltar para o carrinho</a></p>
{% endif %}
{% endblock %}
